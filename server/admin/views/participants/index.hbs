<header
  class='flex items-center justify-between py-6 px-6 mx-auto max-w-screen-2xl'
>
  <h1 class='text-4xl'>Participants</h1>

  <a
    href='/admin/participants/new'
    class='flex items-center gap-2 px-4 py-2 rounded-md bg-green-600 text-gray-100'
  >
    <span class='material-symbols-outlined'>
      add
    </span>
    Create
  </a>
</header>

<section class='flex flex-col max-w-screen-2xl mx-auto p-6'>
  <form 
    action="/admin/participants" 
    method="get" 
    class="mb-6 flex gap-4 items-end"
  >
    <div class="flex-1">
      <label for="search" class="block text-sm font-medium text-gray-700 mb-1">Search</label>
      <input
        type="text"
        id="search"
        name="search"
        placeholder="Search by name, username or email..."
        value="{{search}}"
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"
      />
    </div>
    <button
      type="submit"
      class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"
    >
      Search
    </button>
    {{#if search}}
      <a
        href="/admin/participants"
        class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"
      >
        Clear
      </a>
    {{/if}}
  </form>

  {{#each participants}}
    <div class='flex flex-col mb-4'>
      <span>{{this.username}}</span>
      <div
        class='px-2 py-1 flex items-center justify-between border border-gray-800'
      >
        <div class='flex items-center gap-2'>
          <a
            href='/admin/participants/{{this.username}}'
            class='font-bold hover:underline'
          >{{this.name}}</a>
          |
          <span>{{this.email}}</span>
          | 
          <span>{{this.type}}</span>
          | 
          <span>{{this.institution}}</span>
        </div>

        <div class='flex items-center gap-2 text-gray-50'>

          <a
            href='/admin/participants/{{this.username}}/edit'
            type='submit'
            class='flex items-center justify-center h-8 w-8 bg-orange-500 rounded-md'
          >
            <span class='material-symbols-outlined'>edit</span>
          </a>

          <form
            action='/admin/participants/{{this.username}}/delete'
            method='post'
            class='flex items-center justify-center h-8 w-8'
          >
            <button
              type='submit'
              class='flex items-center justify-center h-8 w-8 bg-red-400 rounded-md cursor-pointer'
              onclick="return confirm('Are you sure you want to delete participant {{this.username}}?')"
            >
              <span class='material-symbols-outlined'>delete</span>
            </button>
          </form>

        </div>
      </div>
    </div>
  {{/each}}

  {{#if pagination}}
    <div class="flex items-center justify-between mt-6">
      <div class="text-sm text-gray-600">
        Showing {{pagination.limit}} of {{pagination.total}} participants
      </div>
      
      <div class="flex items-center gap-2">
        {{#if pagination.hasPrev}}
          <a 
            href="/admin/participants?page={{subtract pagination.currentPage 1}}" 
            class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"
          >
            Previous
          </a>
        {{/if}}

        <span class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md">
          Page {{pagination.currentPage}} of {{pagination.totalPages}}
        </span>

        {{#if pagination.hasNext}}
          <a 
            href="/admin/participants?page={{add pagination.currentPage 1}}" 
            class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"
          >
            Next
          </a>
        {{/if}}
      </div>
    </div>
  {{/if}}
</section>